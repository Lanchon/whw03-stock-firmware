function validateSession(){RAINIER.event.disconnect("ui.RetrievedRemoteSetting",validateSession);if(RAINIER.network.uiLoadedFromCloud()){var a=!_.isEmpty($.cookie("force-pw-update"));RAINIER.network.readOAuthToken();RAINIER.cloud.send({url:"/cloud/user-service/rest/accounts/self",type:"GET",cb:function(b){if(b){if(a){Account.forceCloudPWChange($.cookie("user-auth-token"));return}RAINIER.event.fire("ui.SessionValidated")}else{RAINIER.network.signOut()}},cbError:function(d){var c=RAINIER.util.parseJSON(d.responseText),b=null,e=false;if(c&&c.errors){b=lodash.find(c.errors,{error:{code:"SESSION_RESTRICTED"}});if(b&&b.error.parameters){e=lodash.some(b.error.parameters,{parameter:{name:"restrictions",value:"MFA"}})}}if(e){Account.mfa.refreshToken({cbError:function(){window.location.replace("/ui/dynamic/mfa-challenge.html?return_path="+encodeURI(window.location.pathname))}})}else{RAINIER.network.signOut()}}})}else{RAINIER.jnap.send({action:"/jnap/core/CheckAdminPassword",data:{},cb:function(b){if(b.result==="OK"){RAINIER.event.fire("ui.SessionValidated")}else{RAINIER.network.signOut()}},disableDefaultJnapErrHandler:true,useAdminAuth:true,adminPasswordOverride:$.cookie("admin-auth")})}}RAINIER.event.connect("ui.RetrievedRemoteSetting",validateSession);(function(){var d=null,b=(new Date()).getTime();$("html").mousemove(function(){if(a()){b=(new Date()).getTime()}});$("html").keyup(function(){if(a()){b=(new Date()).getTime()}});function c(){clearInterval(d);RAINIER.network.signOut()}function a(){if(window.location.hash!=="#casupport"){var e=(new Date()).getTime()-b;if(e>(1000*60*15)){c();return false}else{return true}}else{return false}}d=setInterval(a,1000*10)}());