RAINIER.blockScheduler=(function(){var F="0",R=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],T=RAINIER.util.getDaysOfWeek(),B=RAINIER.util.getLocaleHoursInDay(),j,k,H,y,C,z,K=false,r=false,I=false,x=-1000,w=-1000,i=-1000,f=-1000,u=0,t=0,V=0,E=0,o=0,n=0,M=0,L=0,J={sunday:"000000000000001111111111111111111111111111000000",monday:"000000000000001111111111111111111111111111000000",tuesday:"000000000000001111111111111111111111111111000000",wednesday:"000000000000001111111111111111111111111111000000",thursday:"000000000000001111111111111111111111111111000000",friday:"000000000000001111111111111111111111111111111111",saturday:"000000000000001111111111111111111111111111111111"};function P(){H=$("#blockInternetAccessNet");j=H.find("#tableBlockAccess");k=H.find("#divSelection");z=H[0];y=j[0];C=k[0];I=RAINIER.ui.getDirection()==="rtl";D();v();$(z).bind("mousedown",Q);$(z).bind("mousemove",b);$(z).bind("mouseup",U)}function p(W){var X=RAINIER.ui.build,aa=X.TD({"class":"unchecked",click:"ToggleBlockCellClass"});for(var Z=0;Z<T.length;Z++){var ab="#row"+T[Z];for(var Y=0;Y<48;Y++){$(ab).append(aa.cloneNode(true))}$(ab).append(X.TD())}if(typeof W==="function"){W()}}function D(){var X,W="<td></td>";if(B[13]==="13"||B[13]==="١٣"){j.find(".moon-icon, .sun-icon").css("display","none")}for(X=0;X<B.length;X+=0.5){W+="<td>";if(X%1===0){W+="<div>"+B[X]+"</div>"}W+="</td>"}j.find(".header").html(W)}function v(){var X=j.find("#rowSunday")[0],W=j.find("#rowSaturday")[0];if(I){o=X.cells[X.cells.length-2].offsetLeft+1;n=X.cells[X.cells.length-2].offsetTop+1;M=W.cells[0].offsetLeft-1;L=W.cells[0].offsetTop+W.offsetHeight}else{o=X.cells[1].offsetLeft+1;n=X.cells[1].offsetTop+1;M=W.cells[W.cells.length-1].offsetLeft-1;L=W.cells[W.cells.length-1].offsetTop+W.offsetHeight-1}}function O(W){return W.pageX-j.offset().left}function N(W){return W.pageY-j.offset().top}function Q(W){x=O(W);w=N(W);u=x;t=w;V=0;E=0;if(x>=o-1&&x<=M+1&&w>=n-1&&w<=L+1){r=true;q(u,t,V,E,"hidden");$.cancelEvents(W)}return false}function q(aa,Z,Y,W,X){aa+=y.offsetLeft;Z+=y.offsetTop;C.style.left=aa+"px";C.style.top=Z+"px";C.style.width=Y+"px";C.style.height=W+"px";C.style.visibility=X}function b(W){if(r){K=true;i=O(W);f=N(W);if(i<=o){i=o}if(i>=M){i=M}if(f<=n){f=n}if(f>=L){f=L}if(x<=i){u=x;V=i-x}else{u=i-1;V=x-i}if(w<=f){t=w;E=f-w}else{t=f-1;E=w-f}q(u,t,V,E,"visible")}return false}function U(){if(r){r=false;K=false;l();C.style.visibility="hidden"}}function h(W){for(var X=2;X<y.rows.length-1;X++){if(W>=y.rows[X].offsetTop&&W<=y.rows[X].offsetTop+y.rows[X].offsetHeight){return X}}}function c(X){for(var W=1;W<y.rows[2].cells.length-1;W++){if(X>=y.rows[2].cells[W].offsetLeft&&X<=y.rows[2].cells[W].offsetLeft+y.rows[2].cells[W].offsetWidth-1){return W}}}function m(X,ab,Z,W){for(var aa=X;aa<=ab;aa++){for(var Y=Z;Y<=W;Y++){if(y.rows[aa].cells[Y].className!==y.rows[X].cells[Z].className){return"checked"}}}return y.rows[X].cells[Z].className}function l(){var X=h(t),ad=h(t+E),aa,W;if(I){aa=c(u+V);W=c(u)}else{aa=c(u);W=c(u+V)}var Z=m(X,ad,aa,W),ab=(Z==="checked")?"unchecked":"checked";for(var ac=X;ac<=ad;ac++){for(var Y=aa;Y<=W;Y++){y.rows[ac].cells[Y].className=ab}}}function G(Y,X){for(var Z=1;Z<Y.cells.length-1;Z++){var W=Y.cells[Z];if(X[Z-1]===F){W.className="checked"}else{W.className="unchecked"}}}function S(Y){var X=jQuery.extend(true,[],R);for(var Z=1;Z<Y.cells.length-1;Z++){var W=Y.cells[Z];if(W.className==="checked"){X[Z-1]=F}}return X.join("")}function a(W){var Y=2,X=y.rows[Y];G(X,W.sunday);X=y.rows[++Y];G(X,W.monday);X=y.rows[++Y];G(X,W.tuesday);X=y.rows[++Y];G(X,W.wednesday);X=y.rows[++Y];G(X,W.thursday);X=y.rows[++Y];G(X,W.friday);X=y.rows[++Y];G(X,W.saturday)}function s(){var W={},Y=2,X=y.rows[Y];W.sunday=S(X);X=y.rows[++Y];W.monday=S(X);X=y.rows[++Y];W.tuesday=S(X);X=y.rows[++Y];W.wednesday=S(X);X=y.rows[++Y];W.thursday=S(X);X=y.rows[++Y];W.friday=S(X);X=y.rows[++Y];W.saturday=S(X);return W}function e(W){var X=new Date(),Z=new Date(X.getTime()+(X.getTimezoneOffset()*-60000));if(W!==undefined){Z=RAINIER.util.routerTimeToDate(W)}var Y=y.rows[Z.getUTCDay()+2].cells[Z.getUTCHours()+1];return Y}function d(){var W=[];for(var X=0;X<7;X++){var Y=y.rows[X+2];W[X]=S(Y).split("")}return W}function A(aa,Y){var Z=Math.abs(Y.getTime()-aa.getTime()),W=Math.floor(Z/(60*60*1000)),X=Math.floor((Z/(60*1000))%60);return W+":"+X}function g(){for(var W=0;W<7;W++){var X=y.rows[W+2];if(S(X).indexOf("0")!==-1){return true}}return false}return{init:P,populateBlockAccessTable:p,populateCellsOffsets:v,setCheckedCellsPol:a,getAccessSchedule:s,getCurrentTimeCell:e,hasSelectedCells:g,defaultRule:function(){return J}}})();